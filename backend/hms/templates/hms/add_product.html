<div id='add_product_section'>
    <h1>Add Product</h1>
    <form method="post" id="hms-add-product-form"> <!-- Add an ID to the form for easy targeting -->
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Add Product</button>
    </form>
</div>

{% comment %} 
script to handle an async for submission, without reloading the entire page
{% endcomment %}
<script type="text/javascript">
    // Function to handle form submission and update the section
    function updateAddProductSection(event) {
        event.preventDefault(); // Prevent the default form submission behavior (prevent page reload)
        const form = document.getElementById('hms-add-product-form');
        const formData = new FormData(form);

        fetch("{% url 'add_product' %}", {
            method: "POST",
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest' // This header signals to Django that it's an AJAX request
            }
        })
        .then(response => response.text())
        .then(data => {
            document.getElementById('add_product_section').innerHTML = data;
        })
        .catch(error => {
            console.error(error);
        });
    }

    // Add an event listener to the form for AJAX submission
    const addProductForm = document.getElementById('hms-add-product-form');
    addProductForm.addEventListener('submit', updateAddProductSection);
</script>
